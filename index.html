<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Frame</title>
  <link rel="stylesheet" href="node_modules/xterm/css/xterm.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <link rel="stylesheet" href="src/renderer/styles/main.css">
</head>
<body>
  <!-- Sidebar -->
  <div id="sidebar">
    <div id="sidebar-resize-handle"></div>
    <div id="sidebar-header">Frame</div>

    <!-- Projects Section -->
    <div id="projects-section">
      <div id="projects-header">
        <span>Projects</span>
        <button id="btn-add-project" class="btn-icon" tabindex="-1" title="Add Project">+</button>
      </div>
      <div id="projects-list">
        <div class="no-projects-message">No projects yet. Add a project to get started.</div>
      </div>
    </div>

    <div id="project-info">
      <div>Current Project:</div>
      <div id="project-path">No project selected</div>
    </div>

    <div id="project-actions">
      <button id="btn-select-project" class="btn" tabindex="-1">Select Project Folder</button>
      <button id="btn-create-project" class="btn btn-secondary" tabindex="-1">Create New Project</button>
      <div class="ai-tool-row">
        <button id="btn-start-ai" class="btn btn-success" tabindex="-1" disabled>Start Claude Code</button>
        <select id="ai-tool-selector" class="ai-tool-select" tabindex="-1">
          <option value="claude">Claude</option>
          <option value="codex">Codex</option>
        </select>
      </div>
      <button id="btn-initialize-frame" class="btn btn-secondary" tabindex="-1" style="display: none;">Initialize as Frame Project</button>
    </div>

    <div id="file-explorer-header" style="display: none;">
      <div class="file-explorer-title">
        <span>Files</span>
        <button id="btn-refresh-tree" class="btn-icon" tabindex="-1" title="Refresh">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
          </svg>
        </button>
      </div>
    </div>

    <div id="file-tree">
      <!-- File tree will be populated here -->
    </div>
  </div>

  <!-- Main Content Area -->
  <div id="main-content">
    <!-- Terminal -->
    <div id="terminal-container">
      <div id="terminal"></div>
    </div>

    <!-- History Panel -->
    <div id="history-panel">
      <div id="history-header">
        <h3>Prompt History</h3>
        <button id="history-close" tabindex="-1">✕</button>
      </div>
      <div id="history-content">
        <!-- History items will be populated here -->
      </div>
    </div>

    <!-- Tasks Panel -->
    <div id="tasks-panel">
      <div id="tasks-header">
        <button id="tasks-collapse-btn" title="Collapse panel">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="9 18 15 12 9 6"/>
          </svg>
        </button>
        <h3>Tasks</h3>
        <div class="tasks-header-actions">
          <button id="tasks-add-btn" tabindex="-1">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="5" x2="12" y2="19"/>
              <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
            Add
          </button>
          <button id="tasks-close" tabindex="-1">✕</button>
        </div>
      </div>
      <div class="tasks-filter">
        <button class="tasks-filter-btn active" data-filter="all">All</button>
        <button class="tasks-filter-btn" data-filter="pending">Pending</button>
        <button class="tasks-filter-btn" data-filter="inProgress">In Progress</button>
        <button class="tasks-filter-btn" data-filter="completed">Completed</button>
      </div>
      <div id="tasks-content">
        <!-- Tasks will be populated here -->
      </div>
    </div>

    <!-- Claude Panel -->
    <div id="plugins-panel">
      <div id="plugins-header">
        <button id="plugins-collapse-btn" title="Collapse panel">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="9 18 15 12 9 6"/>
          </svg>
        </button>
        <h3>Claude</h3>
        <div class="plugins-header-actions">
          <button id="plugins-refresh-btn" tabindex="-1" title="Refresh plugin list">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
            </svg>
          </button>
          <button id="plugins-close" tabindex="-1">✕</button>
        </div>
      </div>
      <div class="claude-tabs">
        <button class="claude-tab-btn active" data-tab="plugins">Plugins</button>
      </div>
      <div data-tab-content="plugins">
        <div class="plugins-filter">
          <button class="plugins-filter-btn active" data-filter="all">All</button>
          <button class="plugins-filter-btn" data-filter="installed">Installed</button>
          <button class="plugins-filter-btn" data-filter="enabled">Enabled</button>
        </div>
        <div id="plugins-content">
          <!-- Plugins will be populated here -->
        </div>
      </div>
    </div>

    <!-- GitHub Panel -->
    <div id="github-panel">
      <div id="github-header">
        <button id="github-collapse-btn" title="Collapse panel">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="9 18 15 12 9 6"/>
          </svg>
        </button>
        <h3>GitHub</h3>
        <div class="github-header-actions">
          <button id="github-refresh-btn" tabindex="-1" title="Refresh">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
            </svg>
          </button>
          <button id="github-close" tabindex="-1">✕</button>
        </div>
      </div>
      <div id="github-repo-name"></div>
      <div class="github-tabs">
        <button class="github-tab-btn active" data-tab="issues">Issues</button>
        <button class="github-tab-btn" data-tab="prs">PRs</button>
        <button class="github-tab-btn" data-tab="branches">Branches</button>
        <button class="github-tab-btn" data-tab="worktrees">Worktrees</button>
      </div>
      <div class="github-filter" id="github-filter">
        <button class="github-filter-btn active" data-filter="open">Open</button>
        <button class="github-filter-btn" data-filter="closed">Closed</button>
        <button class="github-filter-btn" data-filter="all">All</button>
      </div>
      <div class="github-branches-actions" id="github-branches-actions" style="display: none;">
        <button id="github-create-branch-btn" class="github-action-btn">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="5" x2="12" y2="19"/>
            <line x1="5" y1="12" x2="19" y2="12"/>
          </svg>
          New Branch
        </button>
      </div>
      <div id="github-content">
        <!-- GitHub content will be populated here -->
      </div>
    </div>

    <!-- Initialize Frame Modal -->
    <div id="initialize-frame-modal" class="modal-overlay">
      <div class="modal-container modal-container-wide">
        <div class="modal-header">
          <h3>Initialize as Frame Project</h3>
          <button class="modal-close" id="init-frame-modal-close">&#x2715;</button>
        </div>
        <div class="modal-body">
          <p class="init-modal-description">This will create the following files in your project:</p>
          <ul class="init-modal-file-list">
            <li><span class="file-icon">&#128193;</span> .frame/ <span class="file-desc">config directory</span></li>
            <li><span class="file-icon">&#128193;</span> .frame/bin/ <span class="file-desc">AI tool wrappers</span></li>
            <li><span class="file-icon">&#128196;</span> AGENTS.md <span class="file-desc">AI instructions</span></li>
            <li><span class="file-icon">&#128279;</span> CLAUDE.md <span class="file-desc">symlink to AGENTS.md</span></li>
            <li><span class="file-icon">&#128279;</span> GEMINI.md <span class="file-desc">symlink to AGENTS.md</span></li>
            <li><span class="file-icon">&#128196;</span> STRUCTURE.json <span class="file-desc">module map</span></li>
            <li><span class="file-icon">&#128196;</span> PROJECT_NOTES.md <span class="file-desc">session notes</span></li>
            <li><span class="file-icon">&#128196;</span> tasks.json <span class="file-desc">task tracking</span></li>
            <li><span class="file-icon">&#128196;</span> QUICKSTART.md <span class="file-desc">getting started</span></li>
          </ul>
          <div id="init-frame-existing-warning" class="init-modal-warning" style="display: none;">
            <p>These files already exist and will NOT be overwritten:</p>
            <ul id="init-frame-existing-list"></ul>
          </div>
        </div>
        <div class="modal-footer">
          <button class="modal-btn modal-btn-cancel" id="init-frame-cancel">Cancel</button>
          <button class="modal-btn modal-btn-primary" id="init-frame-confirm">Initialize</button>
        </div>
      </div>
    </div>

    <!-- Create Branch Modal -->
    <div id="create-branch-modal" class="modal-overlay">
      <div class="modal-container">
        <div class="modal-header">
          <h3>Create New Branch</h3>
          <button class="modal-close" id="create-branch-modal-close">✕</button>
        </div>
        <div class="modal-body">
          <div class="modal-field">
            <label for="new-branch-name">Branch name</label>
            <input type="text" id="new-branch-name" placeholder="feature/my-new-feature" autocomplete="off" />
          </div>
          <div class="modal-field">
            <label for="base-branch-select">Base branch</label>
            <select id="base-branch-select">
              <option value="">Loading...</option>
            </select>
          </div>
          <div class="modal-field modal-checkbox-field">
            <label class="modal-checkbox-label">
              <input type="checkbox" id="switch-to-branch" checked />
              <span class="checkbox-custom"></span>
              <span>Switch to new branch</span>
            </label>
          </div>
        </div>
        <div class="modal-footer">
          <button class="modal-btn modal-btn-cancel" id="create-branch-cancel">Cancel</button>
          <button class="modal-btn modal-btn-primary" id="create-branch-confirm">Create</button>
        </div>
      </div>
    </div>

  </div>

  <!-- Editor Overlay -->
  <div id="editor-overlay">
    <div id="editor-container">
      <div id="editor-header">
        <div id="editor-title">
          <span id="editor-filename">filename.js</span>
          <span id="editor-ext" class="file-ext">JS</span>
        </div>
        <div id="editor-actions">
          <button id="btn-editor-save" class="btn btn-editor btn-success">Save</button>
          <button id="btn-editor-close" class="btn-editor-close">✕</button>
        </div>
      </div>
      <div id="editor-content">
        <textarea id="editor-textarea" spellcheck="false"></textarea>
      </div>
      <div id="editor-footer">
        <span id="editor-status">Ready</span>
        <span id="editor-path"></span>
      </div>
    </div>
  </div>

  <!-- Task Modal -->
  <div id="task-modal">
    <div class="task-modal-container">
      <div class="task-modal-header">
        <h4 id="task-modal-title">Add Task</h4>
        <button id="task-modal-close" tabindex="-1">✕</button>
      </div>
      <form id="task-form">
        <div class="task-modal-body">
          <div class="task-form-group">
            <label for="task-title-input">Title</label>
            <input type="text" id="task-title-input" placeholder="What needs to be done?" required>
          </div>
          <div class="task-form-group">
            <label for="task-description-input">Description</label>
            <textarea id="task-description-input" placeholder="Add more details (optional)"></textarea>
          </div>
          <div class="task-form-row">
            <div class="task-form-group">
              <label for="task-priority-input">Priority</label>
              <select id="task-priority-input">
                <option value="high">High</option>
                <option value="medium" selected>Medium</option>
                <option value="low">Low</option>
              </select>
            </div>
            <div class="task-form-group">
              <label for="task-category-input">Category</label>
              <select id="task-category-input">
                <option value="feature">Feature</option>
                <option value="fix">Bug Fix</option>
                <option value="refactor">Refactor</option>
                <option value="docs">Documentation</option>
                <option value="test">Testing</option>
                <option value="research">Research</option>
              </select>
            </div>
          </div>
        </div>
        <div class="task-modal-footer">
          <button type="button" id="task-cancel-btn" class="btn btn-secondary">Cancel</button>
          <button type="submit" class="btn btn-success">Save Task</button>
        </div>
      </form>
    </div>
  </div>

  <script src="dist/renderer.js"></script>
</body>
</html>
